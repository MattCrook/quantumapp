{% extends 'shared/base.html' %}
{% load static %}




{% block content %}
<div id="login_container" class="login-container">
    <div id="login_card" class="login-card" style="display: none;">
        <div class="login_card_title">
            <h2>Login</h2>
            <button class="card_close"></button>
        </div>
        <div class="login_sub_header">Superuser or SysAdmin Accounts</div>
        <form action="{% url 'quantumforum:login' %}" method="POST">
            {% csrf_token %}
            {{ login_form.as_p }}
            <button class="login_btn" type="submit">Login</button>
            <button class="register_btn"><a class="register_btn" href="{'#'}">Register New SysAdmin
                    Account</a></button>
            {% if messages %}
            <ul class="messages">
                {% for message in messages %}
                <li id="error_message" {% if message.tags %} class="{{ message.tags }}" {% endif %}>{{ message }}
                </li>
                {% endfor %}
            </ul>
            {% endif %}
        </form>
    </div>
    <div id="row" class="row">
        <div id="login_buttons_card_wrapper" class="col-md-8 mx-auto social-container my-2 order-md-1">

            <button id="login_with_auth0" class="btn btn-primary mb-2">
                <img id="auth0_img" src="../../static/images/iconfinder_auth0_4691528.svg" style="width: 26px;">
                <a href="{% url 'social:begin' 'auth0' %}" title="Auth0">Login with Auth0</a>
            </button>
            <button id="back_to_quantum_coaters" class="btn btn-primary mb-2">
                <i class="fas fa-caret-square-left"></i>
                <a href="{{CLIENT_URL}}">Back To Quantum Coasters</a>
            </button>
            <button id="login_with_email" class="btn btn-primary mb-2">
                <i class="fas fa-envelope"></i>
                <a>Login with Email</a>
            </button>
            <button id="login_help" class="btn btn-primary mb-2">
                <i class="fas fa-question-circle"></i>
                <a href="{% url 'social:begin' 'auth0' %}">Help</a>
            </button>
        </div>
    </div>
</div>
<div class="signature">
    <p id="signature_font_login">
        Made by <a href="https://matt-crook-io.now.sh/">Quantum Coasters</a><i id="i" class="fas fa-trademark"></i>
    </p>
</div>
{% endblock %}

{% block scripts %}
<script type="text/javascript">

    const showLoginWithEmailCard = () => {
        let loginCard = document.getElementById("login_card");
        let loginWithEmailButton = document.getElementById("login_with_email");
        let socialButtonsContainer = document.getElementById("row");
        const close = () => (loginCard.style.display = "none");
        const open = () => (loginCard.style.display = "block");
        const addMarginSocialLoginRow = () => socialButtonsContainer.style.margin = "0% 25% 3% 0.5%";
        const subtractMarginSocialLoginRow = () => socialButtonsContainer.style.margin = "10% 25% 3% 0.5%";

        loginWithEmailButton.addEventListener("click", () => {
            const loginCardDisplay = loginCard.style.display;
            loginCardDisplay === "none" && open() && addMarginSocialLoginRow();
            loginCardDisplay === "block" && close() && subtractMarginSocialLoginRow();
        });
    };

    const cardClose = () => {
        let cardCloseButton = document.querySelector(".card_close");
        let loginCard = document.getElementById("login_card");
        let socialButtonsContainer = document.getElementById("row");
        cardCloseButton.addEventListener("click", () => {
            loginCard.style.display = "none";
            socialButtonsContainer.style.margin = "10% 25% 3% 0.5%";
        });
    };

    showLoginWithEmailCard();
    cardClose();

</script>
{% endblock%}
